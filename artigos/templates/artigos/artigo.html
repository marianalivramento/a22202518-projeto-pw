{% extends 'artigos/layout.html' %}

{% block content %}
    <h1>{{ artigo.titulo }}</h1>
    {% if request.user.is_authenticated %}
        <a href = "{% url 'artigos:edita_artigo' artigo.id %}"><button>Edita Artigo</button></a>
    {% endif %}

    <h4>{{artigo.resumo}}</h4>
    <p>{{ artigo.texto }}</p>

    {% for autor in artigo.autor.all %}
        <h4>Autor: <a href = "{% url 'artigos:autor' autor.id %}"> {{autor.nome}}</a></h4>
    {% endfor %}


    <h2>Reviews
        <a href = "{% url 'artigos:nova_review' %}">
            {% if request.user.is_authenticated %}
                <button>Adicionar Review</button>
            {% endif %}
        </a>
    </h2>

    {% if reviews|length > 0 %}
        {% for review in reviews %}
                <p>
                    <a href = "{% url 'artigos:review' review.id %}">{{review.preview_review}}</a> - {{review.utilizador.nome}}
                     {% if request.user.is_authenticated %}
                        <a href = "{% url 'artigos:apaga_review' review.id %}"><button>Apaga Review</button></a>
                    {% endif %}
                </p>

        {% endfor %}

    {% else %}

        <p>No reviews yet, come back later!</p>
    {% endif %}


{% endblock %}